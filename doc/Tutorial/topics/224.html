<!--create by iword1.0 pro, http://www.voland.com.cn-->
<!-- saved from url=(0026)http://www.runqian.com.cn/ -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<title>9.2 JSON data</title>
<link rel="stylesheet" href="../images/template.css" type="text/css" />
<link rel="stylesheet" href="document.css" type="text/css" />
<script language="JavaScript" src="../resource/url.js"></script>
</head>

<body>

<div id="content-bg">
	<div id="centent">
	<div id="centent-title"><h2 style='margin-left:18.75pt;mso-para-margin-left:0gd;text-indent:-18.75pt;
mso-list:l25 level2 lfo45'><span lang=EN-US
style='mso-fareast-font-family:"Times New Roman"'><span style='mso-list:Ignore'>9.2<span
style='font:7.0pt "Times New Roman"'> </span></span></span><span
lang=EN-US><span style='mso-spacerun:yes'>&nbsp;</span>JSON data</span></h2></div>
	<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US>JSON is a common data-interchange format. JSON data may come from an
external Java program, a local file or the HTTP server. esProc can easily parse
the JSON strings and compute them. </span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US>The following examples will show in detail how to write an esProc
script for doing this. </span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US>In the first case, the JSON string is transferred from an external
Java program through a parameter. </span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US>Suppose there is a JSON string of employee information that includes
the following fields &#8211; EID, NAME, SURNAME, GENDER, STATE, BIRTHDAY, HIREDATE
and DEPT. Now parse the string and find out the female employees born after
January 1, 1981 inclusive. The string is as follows: </span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US>[{EID:1,NAME:&quot;Rebecca&quot;,SURNAME:&quot;Moore&quot;,GENDER:&quot;F&quot;,STATE:&quot;California
&quot;,BIRTHDAY:1974-11-20,HIREDATE:2005-03-11,DEPT:&quot;R&amp;D&quot;,SALARY:7000},</span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US>{EID:2,NAME:&quot;Ashley&quot;,SURNAME:&quot;Wilson&quot;,GENDER:&quot;F&quot;,STATE:&quot;New
York&quot;,BIRTHDAY:1980-07-19,HIREDATE:2008-03-16,DEPT:&quot;Finance&quot;,SALARY:11000},</span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US>{EID:3,NAME:&quot;Rachel&quot;,SURNAME:&quot;Johnson&quot;,GENDER:&quot;F&quot;,STATE:&quot;New
Mexico&quot;,BIRTHDAY:1970-12-17,HIREDATE:2010-12-01,DEPT:&quot;Sales&quot;,SALARY:9000},¡­]</span></p>

<p class=MsoNormal style='text-indent:21.1pt;mso-char-indent-count:2.0'><b
style='mso-bidi-font-weight:normal'><span lang=EN-US>Solution</span></b><span
lang=EN-US>: Call the esProc script in the Java program and meanwhile input the
JSON string; esProc parses and filters the JSON data and then returns the
result in the form of JSON string to the Java program. </span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US>To select female employees born after January 1, 1975 inclusive,
esProc script inputs two parameters &#8211; ¡°jsonstr¡± and ¡°where¡± &#8211; from the external
program, as shown below:</span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=zh-CN style='mso-ansi-language:#0400;mso-fareast-language:#0400'><img border=0 width=439 height=283
src="Tutorial.files/image889.jpg" v:shapes="_x0000_i1990"></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US>¡°<i style='mso-bidi-font-style:normal'>where</i>¡± is a string, its
value is BIRTHDAY&gt;=date(1975,1,1) &amp;&amp; GENDER==&quot;F&quot;. </span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US>Note: Parameter <i style='mso-bidi-font-style:normal'>jsonstr</i> is
a string, its entered value needs to be preceded by a single quote.</span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US>Here¡¯s the esProc script for doing this task:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:14.45pt;border-collapse:collapse;mso-table-layout-alt:fixed;
 border:none;mso-border-alt:solid #A6A6A6 .5pt;mso-padding-alt:0cm 0cm 0cm 0cm;
 mso-border-insideh:.5pt solid #A6A6A6;mso-border-insidev:.5pt solid #A6A6A6'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
  <td width=38 valign=top style='width:1.0cm;border:solid #A6A6A6 1.0pt;
  mso-border-alt:solid #A6A6A6 .5pt;background:#BFBFBF;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
  lang=EN-US>&nbsp;</span></p>
  </td>
  <td width=210 valign=top style='width:157.55pt;border:solid #A6A6A6 1.0pt;
  border-left:none;mso-border-left-alt:solid #A6A6A6 .5pt;mso-border-alt:solid #A6A6A6 .5pt;
  background:#BFBFBF;padding:0cm 0cm 0cm 0cm'>
  <p class=TabLabel21 style='text-align:justify;text-justify:inter-ideograph'><span
  lang=EN-US style='mso-bidi-font-family:"Times New Roman"'>A</span><span
  class=code><span lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:10.0pt;
  font-family:"Times New Roman",serif'></span></span></p>
  </td>
  <td width=377 valign=top style='width:282.65pt;border:none;mso-border-left-alt:
  solid #A6A6A6 .5pt;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
  lang=EN-US>&nbsp;</span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1'>
  <td width=38 valign=top style='width:1.0cm;border:solid #A6A6A6 1.0pt;
  border-top:none;mso-border-top-alt:solid #A6A6A6 .5pt;mso-border-alt:solid #A6A6A6 .5pt;
  background:#BFBFBF;padding:0cm 0cm 0cm 0cm'>
  <p class=TabLabel style='text-align:justify;text-justify:inter-ideograph;
  text-indent:18.0pt;mso-char-indent-count:2.0'><span lang=EN-US
  style='font-size:9.0pt'>1</span></p>
  </td>
  <td width=210 valign=top style='width:157.55pt;border-top:none;border-left:
  none;border-bottom:solid #A6A6A6 1.0pt;border-right:solid #A6A6A6 1.0pt;
  mso-border-top-alt:solid #A6A6A6 .5pt;mso-border-left-alt:solid #A6A6A6 .5pt;
  mso-border-alt:solid #A6A6A6 .5pt;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='font-size:9.0pt;
  font-family:"Times New Roman",serif;font-weight:normal'>=json(jsonstr)</span></span></p>
  </td>
  <td width=377 valign=top style='width:282.65pt;border:none;mso-border-left-alt:
  solid #A6A6A6 .5pt;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal><span lang=zh-CN style='mso-ansi-language:#0400;
  mso-fareast-language:#0400'><img border=0 width=434 height=66
  src="Tutorial.files/image891.jpg" v:shapes="_x0000_i1991"></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2'>
  <td width=38 valign=top style='width:1.0cm;border:solid #A6A6A6 1.0pt;
  border-top:none;mso-border-top-alt:solid #A6A6A6 .5pt;mso-border-alt:solid #A6A6A6 .5pt;
  background:#BFBFBF;padding:0cm 0cm 0cm 0cm'>
  <p class=TabLabel style='text-align:justify;text-justify:inter-ideograph;
  text-indent:18.0pt;mso-char-indent-count:2.0'><span lang=EN-US
  style='font-size:9.0pt'>2</span></p>
  </td>
  <td width=210 valign=top style='width:157.55pt;border-top:none;border-left:
  none;border-bottom:solid #A6A6A6 1.0pt;border-right:solid #A6A6A6 1.0pt;
  mso-border-top-alt:solid #A6A6A6 .5pt;mso-border-left-alt:solid #A6A6A6 .5pt;
  mso-border-alt:solid #A6A6A6 .5pt;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='font-size:9.0pt;
  font-family:"Times New Roman",serif;font-weight:normal'>=A1.select(${where})</span></span></p>
  </td>
  <td width=377 valign=top style='width:282.65pt;border:none;mso-border-left-alt:
  solid #A6A6A6 .5pt;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal><span lang=zh-CN style='mso-ansi-language:#0400;
  mso-fareast-language:#0400'><img border=0 width=434 height=43
  src="Tutorial.files/image893.jpg" v:shapes="_x0000_i1992"></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3'>
  <td width=38 valign=top style='width:1.0cm;border:solid #A6A6A6 1.0pt;
  border-top:none;mso-border-top-alt:solid #A6A6A6 .5pt;mso-border-alt:solid #A6A6A6 .5pt;
  background:#BFBFBF;padding:0cm 0cm 0cm 0cm'>
  <p class=TabLabel style='text-align:justify;text-justify:inter-ideograph;
  text-indent:18.0pt;mso-char-indent-count:2.0'><span lang=EN-US
  style='font-size:9.0pt'>3</span></p>
  </td>
  <td width=210 valign=top style='width:157.55pt;border-top:none;border-left:
  none;border-bottom:solid #A6A6A6 1.0pt;border-right:solid #A6A6A6 1.0pt;
  mso-border-top-alt:solid #A6A6A6 .5pt;mso-border-left-alt:solid #A6A6A6 .5pt;
  mso-border-alt:solid #A6A6A6 .5pt;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='font-size:9.0pt;
  font-family:"Times New Roman",serif;font-weight:normal'>=json(A2)</span></span><b
  style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-size:9.0pt'></span></b></p>
  </td>
  <td width=377 valign=top style='width:282.65pt;border:none;mso-border-left-alt:
  solid #A6A6A6 .5pt;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal><span lang=EN-US>[{&quot;EID&quot;:2,&quot;NAME&quot;:&quot;Ashley&quot;,&quot;SURNAME&quot;:&quot;Wilson&quot;,&quot;GENDER&quot;:&quot;F&quot;,&quot;STATE&quot;:&quot;New
  York&quot;,&quot;BIRTHDAY&quot;:&quot;1980-07-19&quot;,&quot;HIREDATE&quot;:&quot;2008-03-16&quot;,&quot;DEPT&quot;:&quot;Finance&quot;,&quot;SALARY&quot;:11000}¡­]</span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:4;mso-yfti-lastrow:yes'>
  <td width=38 valign=top style='width:1.0cm;border:solid #A6A6A6 1.0pt;
  border-top:none;mso-border-top-alt:solid #A6A6A6 .5pt;mso-border-alt:solid #A6A6A6 .5pt;
  background:#BFBFBF;padding:0cm 0cm 0cm 0cm'>
  <p class=TabLabel style='text-align:justify;text-justify:inter-ideograph;
  text-indent:18.0pt;mso-char-indent-count:2.0'><span lang=EN-US
  style='font-size:9.0pt'>4</span></p>
  </td>
  <td width=210 valign=top style='width:157.55pt;border-top:none;border-left:
  none;border-bottom:solid #A6A6A6 1.0pt;border-right:solid #A6A6A6 1.0pt;
  mso-border-top-alt:solid #A6A6A6 .5pt;mso-border-left-alt:solid #A6A6A6 .5pt;
  mso-border-alt:solid #A6A6A6 .5pt;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='font-size:9.0pt;
  font-family:"Times New Roman",serif;font-weight:normal'>return A3</span></span></p>
  </td>
  <td width=377 valign=top style='width:282.65pt;border:none;mso-border-left-alt:
  solid #A6A6A6 .5pt;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
  lang=EN-US>&nbsp;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US style='mso-bidi-font-size:10.5pt'>A1: Parse the JSON data into a
table sequence. The result can be displayed in esProc¡¯s Integrated Development
Environment (IDE), as shown in the right part of the figure above. </span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US style='mso-bidi-font-size:10.5pt'>A2: Filter the data of the table
sequence. A macro is used to dynamically parse the expression, in which ¡°<i
style='mso-bidi-font-style:normal'>where</i>¡± is the input parameter. esProc
will compute the expression in ${¡­} to get the macro string value and, replace
${¡­} with it, and then interpret and execute the generated expression. The
final code for execution is =A1.select(BIRTHDAY&gt;=date(1975,1,1) &amp;&amp;
GENDER==&quot;F&quot;).</span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US style='mso-bidi-font-size:10.5pt'>A3: Export the data of the
filtered table sequence in the form of a JSON string.</span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US style='mso-bidi-font-size:10.5pt'>A4: Return the desired result set
to the external program.</span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US>Refer to related <i style='mso-bidi-font-style:normal'>Tutorial</i>
sections for the method of calling an esProc script in Java program. </span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US>Another case is that JSON data comes from HTTP server. Suppose a
JSON string of employee information is returned with a <i style='mso-bidi-font-style:
normal'>testServlet</i>. Retrieve and process the data as follows:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:21.55pt;border-collapse:collapse;mso-table-layout-alt:fixed;
 border:none;mso-border-alt:solid #A6A6A6 .5pt;mso-padding-alt:0cm 0cm 0cm 0cm;
 mso-border-insideh:.5pt solid #A6A6A6;mso-border-insidev:.5pt solid #A6A6A6'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
  <td width=43 valign=top style='width:31.9pt;border:solid #A6A6A6 1.0pt;
  mso-border-alt:solid #A6A6A6 .5pt;background:#BFBFBF;padding:0cm 0cm 0cm 0cm'>
  <p class=TabLabel style='text-align:justify;text-justify:inter-ideograph;
  text-indent:20.0pt;mso-char-indent-count:2.0'><span lang=EN-US>&nbsp;</span></p>
  </td>
  <td width=217 valign=top style='width:163.0pt;border:solid #A6A6A6 1.0pt;
  border-left:none;mso-border-left-alt:solid #A6A6A6 .5pt;mso-border-alt:solid #A6A6A6 .5pt;
  background:#BFBFBF;padding:0cm 0cm 0cm 0cm'>
  <p class=TabLabel21 style='text-align:justify;text-justify:inter-ideograph'><span
  lang=EN-US style='mso-bidi-font-family:"Times New Roman"'>A</span></p>
  </td>
  <td width=360 valign=top style='width:269.85pt;border:none;mso-border-left-alt:
  solid #A6A6A6 .5pt;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
  lang=EN-US>&nbsp;</span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1'>
  <td width=43 valign=top style='width:31.9pt;border:solid #A6A6A6 1.0pt;
  border-top:none;mso-border-top-alt:solid #A6A6A6 .5pt;mso-border-alt:solid #A6A6A6 .5pt;
  background:#BFBFBF;padding:0cm 0cm 0cm 0cm'>
  <p class=TabLabel style='text-align:justify;text-justify:inter-ideograph;
  text-indent:18.0pt;mso-char-indent-count:2.0'><span lang=EN-US
  style='font-size:9.0pt'>1</span></p>
  </td>
  <td width=217 valign=top style='width:163.0pt;border-top:none;border-left:
  none;border-bottom:solid #A6A6A6 1.0pt;border-right:solid #A6A6A6 1.0pt;
  mso-border-top-alt:solid #A6A6A6 .5pt;mso-border-left-alt:solid #A6A6A6 .5pt;
  mso-border-alt:solid #A6A6A6 .5pt;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='font-size:9.0pt;
  font-family:"Times New Roman",serif;font-weight:normal'>=httpfile(&quot;http://localhost:6080/myweb/servlet/testServlet?table=employee&amp;type=json&quot;)</span></span></p>
  </td>
  <td width=360 valign=top style='width:269.85pt;border:none;mso-border-left-alt:
  solid #A6A6A6 .5pt;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
  lang=EN-US>&nbsp;</span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2'>
  <td width=43 valign=top style='width:31.9pt;border:solid #A6A6A6 1.0pt;
  border-top:none;mso-border-top-alt:solid #A6A6A6 .5pt;mso-border-alt:solid #A6A6A6 .5pt;
  background:#BFBFBF;padding:0cm 0cm 0cm 0cm'>
  <p class=TabLabel style='text-align:justify;text-justify:inter-ideograph;
  text-indent:18.0pt;mso-char-indent-count:2.0'><span lang=EN-US
  style='font-size:9.0pt'>2</span></p>
  </td>
  <td width=217 valign=top style='width:163.0pt;border-top:none;border-left:
  none;border-bottom:solid #A6A6A6 1.0pt;border-right:solid #A6A6A6 1.0pt;
  mso-border-top-alt:solid #A6A6A6 .5pt;mso-border-left-alt:solid #A6A6A6 .5pt;
  mso-border-alt:solid #A6A6A6 .5pt;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='font-size:9.0pt;
  font-family:"Times New Roman",serif;font-weight:normal'>=A1.read()</span></span><b
  style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-size:9.0pt;
  mso-fareast-font-family:ºÚÌå'></span></b></p>
  </td>
  <td width=360 valign=top style='width:269.85pt;border:none;mso-border-left-alt:
  solid #A6A6A6 .5pt;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
  lang=EN-US>&nbsp;</span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3'>
  <td width=43 valign=top style='width:31.9pt;border:solid #A6A6A6 1.0pt;
  border-top:none;mso-border-top-alt:solid #A6A6A6 .5pt;mso-border-alt:solid #A6A6A6 .5pt;
  background:#BFBFBF;padding:0cm 0cm 0cm 0cm'>
  <p class=TabLabel style='text-align:justify;text-justify:inter-ideograph;
  text-indent:18.0pt;mso-char-indent-count:2.0'><span lang=EN-US
  style='font-size:9.0pt'>3</span></p>
  </td>
  <td width=217 valign=top style='width:163.0pt;border-top:none;border-left:
  none;border-bottom:solid #A6A6A6 1.0pt;border-right:solid #A6A6A6 1.0pt;
  mso-border-top-alt:solid #A6A6A6 .5pt;mso-border-left-alt:solid #A6A6A6 .5pt;
  mso-border-alt:solid #A6A6A6 .5pt;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='font-size:9.0pt;
  font-family:"Times New Roman",serif;font-weight:normal'>=A2.import@j()</span></span></p>
  </td>
  <td width=360 valign=top style='width:269.85pt;border:none;mso-border-left-alt:
  solid #A6A6A6 .5pt;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
  lang=EN-US>&nbsp;</span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:4'>
  <td width=43 valign=top style='width:31.9pt;border:solid #A6A6A6 1.0pt;
  border-top:none;mso-border-top-alt:solid #A6A6A6 .5pt;mso-border-alt:solid #A6A6A6 .5pt;
  background:#BFBFBF;padding:0cm 0cm 0cm 0cm'>
  <p class=TabLabel style='text-align:justify;text-justify:inter-ideograph;
  text-indent:18.0pt;mso-char-indent-count:2.0'><span lang=EN-US
  style='font-size:9.0pt'>4</span></p>
  </td>
  <td width=217 valign=top style='width:163.0pt;border-top:none;border-left:
  none;border-bottom:solid #A6A6A6 1.0pt;border-right:solid #A6A6A6 1.0pt;
  mso-border-top-alt:solid #A6A6A6 .5pt;mso-border-left-alt:solid #A6A6A6 .5pt;
  mso-border-alt:solid #A6A6A6 .5pt;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='font-size:9.0pt;
  font-family:"Times New Roman",serif;font-weight:normal'>=A3.select(${where})</span></span></p>
  </td>
  <td width=360 valign=top style='width:269.85pt;border:none;mso-border-left-alt:
  solid #A6A6A6 .5pt;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
  lang=EN-US>&nbsp;</span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:5'>
  <td width=43 valign=top style='width:31.9pt;border:solid #A6A6A6 1.0pt;
  border-top:none;mso-border-top-alt:solid #A6A6A6 .5pt;mso-border-alt:solid #A6A6A6 .5pt;
  background:#BFBFBF;padding:0cm 0cm 0cm 0cm'>
  <p class=TabLabel style='text-align:justify;text-justify:inter-ideograph;
  text-indent:18.0pt;mso-char-indent-count:2.0'><span lang=EN-US
  style='font-size:9.0pt'>5</span></p>
  </td>
  <td width=217 valign=top style='width:163.0pt;border-top:none;border-left:
  none;border-bottom:solid #A6A6A6 1.0pt;border-right:solid #A6A6A6 1.0pt;
  mso-border-top-alt:solid #A6A6A6 .5pt;mso-border-left-alt:solid #A6A6A6 .5pt;
  mso-border-alt:solid #A6A6A6 .5pt;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='font-size:9.0pt;
  font-family:"Times New Roman",serif;font-weight:normal'>=json(A4)</span></span></p>
  </td>
  <td width=360 valign=top style='width:269.85pt;border:none;mso-border-left-alt:
  solid #A6A6A6 .5pt;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
  lang=EN-US>&nbsp;</span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:6;mso-yfti-lastrow:yes'>
  <td width=43 valign=top style='width:31.9pt;border:solid #A6A6A6 1.0pt;
  border-top:none;mso-border-top-alt:solid #A6A6A6 .5pt;mso-border-alt:solid #A6A6A6 .5pt;
  background:#BFBFBF;padding:0cm 0cm 0cm 0cm'>
  <p class=TabLabel style='text-align:justify;text-justify:inter-ideograph;
  text-indent:18.0pt;mso-char-indent-count:2.0'><span lang=EN-US
  style='font-size:9.0pt'>6</span></p>
  </td>
  <td width=217 valign=top style='width:163.0pt;border-top:none;border-left:
  none;border-bottom:solid #A6A6A6 1.0pt;border-right:solid #A6A6A6 1.0pt;
  mso-border-top-alt:solid #A6A6A6 .5pt;mso-border-left-alt:solid #A6A6A6 .5pt;
  mso-border-alt:solid #A6A6A6 .5pt;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='font-size:9.0pt;
  font-family:"Times New Roman",serif;font-weight:normal'>return A5</span></span></p>
  </td>
  <td width=360 valign=top style='width:269.85pt;border:none;mso-border-left-alt:
  solid #A6A6A6 .5pt;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
  lang=EN-US>&nbsp;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US>A1: Define an httpfile object, the URL is </span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><i
style='mso-bidi-font-style:normal'><span lang=EN-US>http://localhost:6080/myweb/servlet/testServlet</span></i><span
lang=EN-US>?table=employee&amp;type=json<i style='mso-bidi-font-style:normal'>.
</i></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US>A2: Read the result returned by the httpfile object. </span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US>A3: Parse the JSON string and generate a table sequence.</span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US>A4: Filter the data according to the specified condition. </span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US>A5: Convert the filtered table sequence to a JSON string. </span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US>A6: Return the result of A5 to the Java program invoking the esProc
script. </span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US>esProc can also parse and compute the JSON data including nested
object. For example, the nested comments in the blog. esProc an parse them into
fields which can be referenced. Below is the <i style='mso-bidi-font-style:
normal'>blogs.json</i> file:</span></p>

<p class=MsoNormal style='text-indent:21.2pt;mso-char-indent-count:2.02'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>[<span style='mso-tab-count:1'>&nbsp; </span></span></i></p>

<p class=MsoNormal style='text-indent:21.2pt;mso-char-indent-count:2.02'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>{<span style='mso-tab-count:1'>&nbsp; </span>&quot;id&quot;
: 1000,</span></i></p>

<p class=MsoNormal style='text-indent:42.5pt;mso-char-indent-count:4.05'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>&quot;content&quot; : &quot;It is too hot&quot;,</span></i></p>

<p class=MsoNormal style='text-indent:42.5pt;mso-char-indent-count:4.05'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>&quot;comment&quot; : </span></i></p>

<p class=MsoNormal style='text-indent:42.5pt;mso-char-indent-count:4.05'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>[ </span></i></p>

<p class=MsoNormal style='text-indent:63.75pt;mso-char-indent-count:6.07'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>{ </span></i></p>

<p class=MsoNormal style='text-indent:3.0cm;mso-char-indent-count:8.1'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>&quot;author&quot; : &quot;joe&quot;, </span></i></p>

<p class=MsoNormal style='text-indent:3.0cm;mso-char-indent-count:8.1'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>&quot;score&quot; : 3, </span></i></p>

<p class=MsoNormal style='text-indent:3.0cm;mso-char-indent-count:8.1'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>&quot;comment&quot; : &quot;just so so!&quot; </span></i></p>

<p class=MsoNormal style='text-indent:63.75pt;mso-char-indent-count:6.07'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>}, </span></i></p>

<p class=MsoNormal style='text-indent:63.75pt;mso-char-indent-count:6.07'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>{ </span></i></p>

<p class=MsoNormal style='text-indent:3.0cm;mso-char-indent-count:8.1'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>&quot;author&quot; : &quot;jimmy&quot;, </span></i></p>

<p class=MsoNormal style='text-indent:3.0cm;mso-char-indent-count:8.1'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>&quot;score&quot; : 5, &quot;comment&quot; : &quot;cool! good!&quot; </span></i></p>

<p class=MsoNormal style='text-indent:63.75pt;mso-char-indent-count:6.07'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>} </span></i></p>

<p class=MsoNormal style='text-indent:42.5pt;mso-char-indent-count:4.05'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>] </span></i></p>

<p class=MsoNormal style='text-indent:21.2pt;mso-char-indent-count:2.02'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>},</span></i></p>

<p class=MsoNormal style='text-indent:21.2pt;mso-char-indent-count:2.02'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>{<span style='mso-tab-count:1'>&nbsp; </span>&quot;id&quot;
: 1001, </span></i></p>

<p class=MsoNormal style='text-indent:42.5pt;mso-char-indent-count:4.05'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>&quot;content&quot; : &quot;It is too cold&quot;, </span></i></p>

<p class=MsoNormal style='text-indent:42.5pt;mso-char-indent-count:4.05'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>&quot;comment&quot; : </span></i></p>

<p class=MsoNormal style='text-indent:42.5pt;mso-char-indent-count:4.05'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>[ </span></i></p>

<p class=MsoNormal style='text-indent:63.75pt;mso-char-indent-count:6.07'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>{ </span></i></p>

<p class=MsoNormal style='text-indent:3.0cm;mso-char-indent-count:8.1'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>&quot;author&quot; : &quot;james&quot;, </span></i></p>

<p class=MsoNormal style='text-indent:3.0cm;mso-char-indent-count:8.1'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>&quot;score&quot; : 1, </span></i></p>

<p class=MsoNormal style='text-indent:3.0cm;mso-char-indent-count:8.1'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>&quot;comment&quot; : &quot;yes!&quot; },</span></i></p>

<p class=MsoNormal style='text-indent:63.75pt;mso-char-indent-count:6.07'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>{</span></i></p>

<p class=MsoNormal style='text-indent:3.0cm;mso-char-indent-count:8.1'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>&quot;author&quot;: &quot;jimmy&quot;, </span></i></p>

<p class=MsoNormal style='text-indent:3.0cm;mso-char-indent-count:8.1'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>&quot;score&quot; : 5, </span></i></p>

<p class=MsoNormal style='text-indent:3.0cm;mso-char-indent-count:8.1'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>&quot;comment&quot; : &quot;cool!&quot; </span></i></p>

<p class=MsoNormal style='text-indent:63.75pt;mso-char-indent-count:6.07'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>} </span></i></p>

<p class=MsoNormal style='text-indent:42.5pt;mso-char-indent-count:4.05'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>] </span></i></p>

<p class=MsoNormal style='text-indent:1.0cm;mso-char-indent-count:2.7'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>},</span></i></p>

<p class=MsoNormal style='text-indent:21.2pt;mso-char-indent-count:2.02'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>{<span style='mso-tab-count:1'>&nbsp; </span>&quot;id&quot;
: 1002, </span></i></p>

<p class=MsoNormal style='text-indent:42.5pt;mso-char-indent-count:4.05'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>&quot;content&quot; : &quot;It is windy day today&quot;,</span></i></p>

<p class=MsoNormal style='text-indent:42.5pt;mso-char-indent-count:4.05'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>&quot;comment&quot; : </span></i></p>

<p class=MsoNormal style='text-indent:42.5pt;mso-char-indent-count:4.05'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>[ </span></i></p>

<p class=MsoNormal style='text-indent:63.75pt;mso-char-indent-count:6.07'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>{</span></i></p>

<p class=MsoNormal style='text-indent:3.0cm;mso-char-indent-count:8.1'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>&quot;author&quot; : &quot;tom&quot;, </span></i></p>

<p class=MsoNormal style='text-indent:3.0cm;mso-char-indent-count:8.1'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>&quot;score&quot; : 3, </span></i></p>

<p class=MsoNormal style='text-indent:3.0cm;mso-char-indent-count:8.1'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>&quot;comment&quot; : &quot;I do not thinkso!&quot; </span></i></p>

<p class=MsoNormal style='text-indent:63.75pt;mso-char-indent-count:6.07'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>},</span></i></p>

<p class=MsoNormal style='text-indent:63.75pt;mso-char-indent-count:6.07'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>{ </span></i></p>

<p class=MsoNormal style='text-indent:3.0cm;mso-char-indent-count:8.1'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>&quot;author&quot; : &quot;jimmy&quot;,</span></i></p>

<p class=MsoNormal style='text-indent:3.0cm;mso-char-indent-count:8.1'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>&quot;score&quot; : 5,</span></i></p>

<p class=MsoNormal style='text-indent:3.0cm;mso-char-indent-count:8.1'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>&quot;comment&quot; : &quot;cool!&quot; </span></i></p>

<p class=MsoNormal style='text-indent:63.75pt;mso-char-indent-count:6.07'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>} </span></i></p>

<p class=MsoNormal style='text-indent:42.5pt;mso-char-indent-count:4.05'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>] </span></i></p>

<p class=MsoNormal style='text-indent:21.2pt;mso-char-indent-count:2.02'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>}</span></i></p>

<p class=MsoNormal style='text-indent:21.2pt;mso-char-indent-count:2.02'><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='mso-bidi-font-size:
10.5pt'>]</span></i><span lang=EN-US style='mso-bidi-font-size:10.5pt'></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US>Use the esProc editor to write a script for importing data from the
JSON file, parsing and computing it: </span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:26.7pt;border-collapse:collapse;mso-table-layout-alt:fixed;
 border:none;mso-border-alt:solid windowtext .5pt;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
  <td width=32 style='width:24.15pt;border:solid windowtext 1.0pt;mso-border-alt:
  solid windowtext .5pt;background:#A6A6A6;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
  lang=EN-US>&nbsp;</span></p>
  </td>
  <td width=355 style='width:266.6pt;border:solid windowtext 1.0pt;border-left:
  none;mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  background:#A6A6A6;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0'><span
  lang=EN-US style='font-size:9.0pt'>A</span></p>
  </td>
  <td width=293 style='width:219.8pt;border:none;mso-border-left-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
  lang=EN-US>&nbsp;</span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1;mso-yfti-lastrow:yes'>
  <td width=32 style='width:24.15pt;border:solid windowtext 1.0pt;border-top:
  none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  background:#A6A6A6;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0'><span
  lang=EN-US style='font-size:9.0pt'>1</span></p>
  </td>
  <td width=355 style='width:266.6pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:9.0pt'>=file(&quot;D:/files/work/txt/blogs.json&quot;).read().import@j()</span></p>
  </td>
  <td width=293 style='width:219.8pt;border:none;mso-border-left-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
  lang=EN-US>&nbsp;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=zh-CN style='mso-ansi-language:#0400;mso-fareast-language:#0400'>Get the
resulting table sequence and you can see that <i style='mso-bidi-font-style:
normal'>comment</i> field is a field referencing<span
style='mso-spacerun:yes'>&nbsp; </span>table sequences, as shown below:</span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=zh-CN style='mso-ansi-language:#0400;mso-fareast-language:#0400'><img border=0 width=300 height=82
src="Tutorial.files/image894.png" v:shapes="Í¼Æ¬_x0020_928"></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US>Double-click the blue value in the first row to see the referenced
table sequence in detail:</span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=zh-CN style='mso-ansi-language:#0400;mso-fareast-language:#0400'><img border=0 width=236 height=63
src="Tutorial.files/image895.png" v:shapes="Í¼Æ¬_x0020_929"></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US>esProc can further perform more complicated set operations based on
this table sequence with a referencing field. </span></p>
	</div>
	<div id="previous-next">
		<div id="next"><a href="225.html">Next</a></div>
		<div id="previous"><a href="223.html">Previous</a></div>		
	</div>
	<div id="related">
		<div class="related-title"><div class="related-title-left"></div>   Related :</div>
		<div class="related-list"><li><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'><a href="222.html">Chapter9 Heterogeneous Data Sources</a></span></li>
</div>
	</div>
	<div id="footer">	
		
		
    <div class="copyright"> Copyright&reg; 2021-2023 <a href="http://www.scudata.com" target="_Blank">SCUDATA Inc. 
      </a></div>
	</div>
</div>

</body>
</html>
